# BarrelOfCider
Проект по ПЭВМ - база данных
## Как скачать( пока невозможно, просто планы)  
1) Необходим Windows
2) Необходимо скачать Make
3) Сборка:  
Сервер:  
```shell
git clone https://github.com/SashaErkhov/BarrelOfCider
cd BarrelOfCider
make server
move bin.exe < wdir>
```  
< wdir> - директория, где будет исполняться бинарный файл, ака рабочая директория  
```shell
cd < wdir>
mkdir resources
```  
Клиент:  
```shell
git clone https://github.com/SashaErkhov/BarrelOfCider
cd BarrelOfCider
make client
move bin.exe < wdir>
cd < wdir>
copy con conf.txt
< username>
и т.д(потом доделаю)
```  
< username> - имя пользователя  
  
И все, подключаемся и работаем  
## Как пользоваться?(ещё не готово)  
Сразу после запуска программы необходимо ввести пароль от учетной записи. Далее можно:  
* Регистрировать новых пользователей
```
r < username> < password>
```
< username> - имя пользователя(не пустое и не длиннее 50 символов)  
< password> - пароль(не меньше 4 и не больше 50 символов)  
Как для одного, так и для другого можно использовать только латинские буквы в обоих регистрах, цифры, "-" и "_"  
* Добавлять новую запись
```
a < name> < value>
```
< name> - имя записи( не длиннее 50 символов)  
< value> - значение записи( не длиннее 1024 символов)  
* удалять запись по id
```
d < id>
```
* изменять запись по id
```
u < id> < newName> < newValue>
```  
* получение всех записей( вывод в консоль)  
```
g all
```
* получение записей с определенным именем  
```
g name < name>
```
* получение записей с определенным значением
```
g value < value>
```
* выход из программы
```
q
```
---
Некоторые пояснения:
* Первый пользователь может появиться только по волеизъявлению админа. Просто так зарегистрироваться невозможно
* База данных, сведения о пользователях и логи хранятся на сервере. Пользовательское приложение лишь проверяет лексику и семантику и отправляет запросы на сервер
* Шифрование взял с репозитория: https://github.com/LekKit/sha256  

## Для разработчиков  
### Файлы  
* BankOfUsers(.cpp/.h) - функции под одним пространством имен,
которые отвечают за добавление и проверку пользователей. Распологается на сервере. Использует хедер онли библиотеку(sha256(.cpp/.h))( на свою машину качать ничего не надо).
Может выбрасывать исключения, т.к. предполагается, что все проверки будут производится на машине клиента и в функции будут приходить правильные параметры.
  Сами ничего не логируют, т.к. это не их уровень ответственности, это надо делать на более высоком уровне.
* BC_Errors.h - свои исключения. Сами ничего не логируют, т.к. это не их уровень ответственности, это надо делать на более высоком уровне.
* DB(.cpp/.h) - сам код базы данных. С логами и исключениями такая же идеалогия
* ID.h и Logs(.cpp/.h) - тут думаю все понятно
* LexicalAnalysis(.cpp/.h) - Лексический анализатор. Располагается на клиенте. Запрещено выбрасывать исключения в угоду оптимизации.
* \*tests.cpp - юнит тесты. Налажены автотесты на гитхабовской машине.
### Правила
* Файлы и классы называются с большой буквы в верблюжьем стиле
* Функции и переменные с маленькой в верблюжьем стиле
* Приватные методы и свойства оканчиваются символом "_".
* Дефайны заборчиком
### Что надо сделать
* тесты под лексический анализатор
* тесты для исключительных ситуаций в DB
* всю сеть и мейны. Здесь я хочу наименьшее число использований исключений. И все что можно проверить, проверять на клиенте, дабы уменьшить кол-во запросов. Больше тестов богу тестов!!!
* попробовать сделать интеграционные тесты итогового проекта